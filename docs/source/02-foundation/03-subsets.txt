.. title:: Yet Another Sudoku | Foundation | Subsets

.. _found_subsets:

*******
Subsets
*******

Subsets refer to 'n' cell by 'n' candidate grouping, where each cell in the grouping contains between
2 and 'n' of the candidates. 'n' ranges between 2 and 4, (pairs, triples and quads).  For values
of “n” > 4, a reciprocal subset relationship of 9 – 'n' candidate values exists, so it is
unnecessary to look for subsets larger than 4.

Exposed or Hidden
=================

Subsets can be Exposed or Hidden:

*  An exposed subset is where 'n' candidate values are the only values occurring between 2 and
   'n' times in the 'n' cells.
*  A hidden subset is where 'n' candidate values can are confined to 'n' cells, but are not
   necessarily the only candidates in those cells.

Unbent or Bent
================

Subsets can be Unbent or Bent:

*  An Unbent Subsets, simply called a "Subset", refers to a collection of 'n' Candidates in 'n'
   Cells in a single :term:`Group`.
*  A “Bent subset” is a collection of 'n' Candidates in n Cells spanning the union of two
   :term:`Group`\s with at least one cell in the intersection.

Unbent Subsets
==============

In :ref:`Unbent Exposed Subsets <hsp_subsets>`, the 'n' candidates can each only be True in one of
the 'n' cells in a Group they collectively only occupy.  That is the n Candidates are
:term:`A Truth` for those n cells. Therefore, they cannot be True outside those 'n' cells.  Any
occurrence of those 'n' candidates outside the 'n' cells can be eliminated.

In :ref:`Unbent Hidden Subsets <hsp_subsets>`, the 'n' candidates are confined to only 'n' cells in
a Group, forming :term:`A Truth`.  Because of this 'Truth', any other candidates in those four cells
can be eliminated.

:ref:`Base Sets and Cover Sets <found_bsets_and_csets>` develops an algebra to verify the logic of
these Subset patterns.

Bent Exposed Subsets
====================

Bent Exposed Subsets are often called Wings, but Wings is rather overloaded term in Sudoku-Speak.

These patterns comprise 'n' candidates in 'n' Cells with 2 to 'n' candidates in each cell spanning
two intersecting Groups with at least one cell in the intersection.  Bent Exposed Subsets must only
have one :term:`Unrestricted Candidate` to be viable, the remaining candidates being
:term:`Restricted Candidate`\s.

The smallest Bent Exposed Subset is the Bent Exposed Triple because at least three cells are
needed to have one in One Group, one in the other Group and one lying in the Intersection.

These patterns are a special case of :ref:`Unlocked Sets <found_unlocked_sets>`, where two
:term:`ULS`\s are linked in a chain with a single :term:`Unrestricted Candidate`.  Bent Exposed
Subsets have a relatively high probability of occurrence in puzzles and are relatively easier to
master than the more complex Unlocked Sets, :term:`YMMV`.

Restricted and Unrestricted Candidates
--------------------------------------

A :term:`Restricted Candidate` is one where all instances of its value in a pattern can see each
other.  An :term:`Unrestricted Candidate` is one where all its instances of its value do not see
each other.

A Bent Exposed subset must have only one Unrestricted Candidate to be viable.  The other Candidates
are all Restricted.  The Unrestricted Candidate must have an instances in :term:`Pattern Cell`\s of
both Groups outside the intersection and may have instances in Pattern Cells in the Intersection.
The Restricted Candidates are only present in pattern cells in that are fully in one :term:`House`
or the other.

The Unrestricted Candidate can be True in at least one or both Groups, perhaps both, but can never
be False in both.  Therefore, any Ccell outside the pattern that can see all Unrestricted Candidate
instances in the Cell Pattern cannot be True, resulting in their elimination.

Bent Exposed Triples
--------------------

Bent Exposed triples are known by their other popular names, Y-Wings (or XY-Wing), and XYZ-Wings.
These two patterns are the only variants of Bent Exposed Triples.  Bent Exposed Triples comprise
3 Candidates in 3 Cells spanning two intersecting Groups with one Pattern Cell in the intersection.

Y-Wings
+++++++

.. figure:: images/y-wing-cd2.png
   :name: fig-y-wing-cd2
   :scale: 100%
   :alt: Y-Wings Candidate Diagram
   :align: right
   :figwidth: image

   Y-Wings Candidate Diagram

These are minimal Bent Exposed Triples where each Pattern Cell only contains two Candidate values
and instances of the Unrestricted Candidate only exist in the two Pattern Cells outside the
intersection.

:numref:`fig-y-wing-cd2` shows two examples of Y-Wings.  The first example:
:raw-html:`<br><mong>XYr2c6,YZr2c2,XZr5c2<mong>` is a Y-Wing spanning Row 2 and Column 2.  X is the
Unrestricted Candidate because the Xr2c6 cannot see Xr5c2. The other two candidates are Restricted
because all instances see all other instances of themselves: Yr2c2-Yr2c6, and Zr2c2-Zr5c2.  As r2c2
does not have an instance of X in it, the only possible Ccell that can see all Unrestricted
Candidates is Xr5c6, which can be eliminated.

The second example: :raw-html:`<br><mong>XYr7c8,YZr7c5,XZr9c4<mong>` is a Y-Wing spanning Row 7 and
Box 8.  X is the Unrestricted Candidate because Xr7c8 cannot see Xr9c4.  The other two candidates
are Restricted, because all instances see other instances of themselves, Yr7c8-Yr7c5 and
Zr7c5-z-r9c4.  In this Box/Line intersection, the possible Ccells that can see all instances of the
Unrestricted Candidates are Xr7c46 and Xr9c789, which can be eliminated

Y Wings are also six Node :ref:`XY Chains <hsp_xy-chains>`.
:raw-html:`<br>Example 1: &nbsp;<mong>(X=Y)r2c6-(Y=Z)r2c2-(Z=X)r5c2<mong>`, and
:raw-html:`<br>Example 2: &nbsp;<mong>(X=Y)r7c8-(Y=Z)r7c5-(Z=X)r9c4<mong>`.

See :ref:`Human Solvable Patterns / Y-Wings <hsp_y_wings>` for worked examples.

XYZ-Wings
+++++++++

.. figure:: images/xyz-wing-cd2.png
   :name: fig-xyz-wing-cd2
   :scale: 100%
   :alt: XYZ-Wings Candidate Diagram
   :align: right
   :figwidth: image

   XYZ-Wings Candidate Diagram

An XYZ Wing pattern finds the Unrestricted Candidate value in all three cells of the Pattern, and
the remaining two Restricted Candidates confined to either one or the other :term:`House`.  The only Ccells
outside the Pattern that :term:`See` all Unrestricted Candidate instances must lie in the
intersection of the two Groups.  Therefore, this pattern only found with Line / Box intersections.
A line / Line intersection only has one Cell in the intersection, and it is part of the Pattern.

The XYZ-Wing pattern in :numref:`fig-xyz-wing-cd2`, :raw-html:`<mong>XYr1c8,XYZr1c2,YZr3c3</mong>`
lies in the intersection of Row 1 and Box 1.  Y is the Unrestricted Candidate present in all three
cells, with Restricted Candidates X and Z which occur in only one :term:`House` each.  Yr1c1 and
Yr1c3 are the only Ccells that can see all three instances of the Unrestricted Candidate (which also
lie in the Intersection), cannot be True, resulting in their elimination.

See :ref:`Human Solvable Patterns / XYZ-Wings <hsp_xyz_wings>` for a worked example

Bent Exposed Quads, Quints and Sexts
------------------------------------

Also known as WXYZ Wings, Bent Exposed Quad (BEQ) patterns comprise a set of 4 Candidates where 2 or
more are present in 4 Cells spanning two Intersecting Groups, and at least one of the Cells lies in
this intersection.  Like all Bent Exposed Subsets only one Candidate is an Unrestricted Candidate
with the remaining Candidates, Restricted.  The Unrestricted Candidate is True in one or both
:term:`House`\s, but cannot be False in both.  Therefore, any Ccell outside the Pattern that can
see all Unrestricted Candidates cannot be True resulting in its elimination.  The Intersecting
Houses can be either a Line and a Box or two Lines.

See :ref:`Human Solvable Patterns / Bent Exposed Quads <hsp_bequads>` for a few worked
examples

Bent Exposed Quints and Sexts are Bent Exposed Subsets with five and six Candidates over five and
six cells in two Intersecting Houses with at least one Cell in the Intersections respectively.
These patterns are relatively common and easy to spot.  Bent Exposed Septs (7) and Octs also occur
but :ref:`Unlocked Sets <hsp_unlocked_sets>` are getting easier to spot for these large patterns,
:term:`YMMV`.

See :ref:`Human Solvable Patterns / Bent Exposed Quints <hsp_bequints>` and
:ref:`Human Solvable Patterns / Bent Exposed Sexts <hsp_besexts>` for worked examples.

Grouped Bent Subsets
====================

Sources:
   |  http://forum.enjoysudoku.com/help-almost-locked-candidates-move-t37339.html
   |  http://forum.enjoysudoku.com/almost-locked-pair-and-almost-locked-triple-t39348.html
   |  http://forum.enjoysudoku.com/almost-locked-candidates-t4477.html


:ref:`Grouped Bent Subsets <hsp_grouped_bent_subsets>` are also known as Almost Locked Candidates.

If a set of 'n' candidates are found in a line box intersection such that they can form an Exposed
Subset in the one Group and a Hidden Subset in the other Group, same value candidates can be
eliminated from other cells in the Exposed Group and from those cells forming the Hidden Subset in
the Hidden Group.

These patterns are another special case of :ref:`Unlocked Sets <found_unlocked_sets>`.  A Hidden
(incomplete) 'n' subset always has a reciprocal Exposed (incomplete) 9 - 'n' subset, and the ULS
Nodes include all the candidates in the intersection.  These patterns especially Grouped Bent Pairs
occur relatively often and are typically much easier to spot and solve this way than as an Unlocked
Set.

Grouped Bent Pairs
------------------

Exposed Line, Hidden Box Grouped Bent Pairs
+++++++++++++++++++++++++++++++++++++++++++

.. figure:: images/gbp-el-hb-cd1.png
   :name: fig-gbp-el-hb-cd1
   :scale: 100%
   :alt: Grouped Bent Pair: Exposed Line, Hidden Box Candidate Diagram
   :align: right
   :figwidth: 400px

   Grouped Bent Pair: Exposed Line, Hidden Box Candidate Diagram

   :raw-html:`<mong>UXYr3c789,XYr3c2,XY--r1c9</mong>`

Asserting the premise Xr3c2 True, infers that X cannot be True anywhere else in Row 3,
including the intersection with Box 3. This further infers Xr1c9 True as r1c9 is the only other
Cell in Box 3 outside the intersection where X can be True.  Inferring Xr1c9 True, infers Y True
only in the intersection Yr3c789.  The same is valid for X and Y interchanged.  Thus, the Truth
XYr3c2789 is established, resulting in the elimination of X and Y from all Cells along Row 3 outside
the intersection r3c789 and r3c2, XY-=r3c!2789.

Asserting XY!-r1c9, that is \*r1c9 is True, infers that both X and Y must be True in the
Intersection XYr3c789. This is impossible as Cell r3c2 outside the Intersection requires either X or
Y.  Therefore, \*r1c9 cannot be True, resulting in its elimination, !(XY)-=r1c9.

See :ref:`Human Solvable Patterns / Grouped Bent Pairs - Exposed Line, Hidden Box <hsp_gbp_el_hb>`
for worked examples.

Hidden Line, Exposed Box Grouped Bent Pairs
+++++++++++++++++++++++++++++++++++++++++++

.. figure:: images/gbp-hl-eb-cd1.png
   :name: fig-gbp-hl-eb-cd1
   :scale: 100%
   :alt: Grouped Bent Pair: Hidden Line, Exposed Box Candidate Diagram
   :align: right
   :figwidth: 400px

   Grouped Bent Pair: Hidden Line, Exposed Box Candidate Diagram

   :raw-html:`<mong>UXYr3c789,XYr1c8,XY--r3c5</mong>`

Asserting the premise Xr1c8 True, infers that X cannot be True anywhere else in Box 3,
including the intersection with Row 3. This further infers Xr3c5 True as r3c5 is the only other
Cell in Row 3 outside the intersection where X can be True.  Inferring Xr3c5 True, infers Y True
only in the intersection Yr3c789.  The same is valid for X and Y interchanged.  Thus, the Truth
XY(r1c8,r3c789) is established resulting in the elimination of X and Y from all cells in Box 3
outside the Intersection r3c789 and r1c8, XY-=b3p!2789.

Asserting XY!-r3c2 True, that is \*r3c5 is True, infers that Both X and Y must be True in the
Intersection, XYr3c789.  This is impossible as Cell r1c8 outside the Intersection requires either X
or Y.  Therefore, \*r3c5 cannot be True, resulting in its elimination !(XY)-=r3c5.

See :ref:`Human Solvable Patterns / Grouped Bent Pairs - Hidden Line, Exposed Box <hsp_gbp_hl_eb>`
for worked examples.

Grouped Bent Triples
--------------------

Exposed Line, Hidden Box Grouped Bent Triples
+++++++++++++++++++++++++++++++++++++++++++++

.. figure:: images/gbt-el-hb-cd1.png
   :name: fig-gbt-el-hb-cd1
   :scale: 100%
   :alt: Grouped Bent Triple: Exposed Line, Hidden Box Candidate Diagram
   :align: right
   :figwidth: 400px

   Grouped Bent Triple: Exposed Line, Hidden Box Candidate Diagram

   :raw-html:`<mong>UXYZr3c789,XYZr3c26,XYZ--r1c9,r2c8</mong>`

Asserting the premise that Xr3c2 and Yr3c6 are True, infers that X and Y cannot be True anywhere
else in Row 3 including the intersection with Box 3. In Box 3, X and Y can only then be True in
either r1c9 or r2c8.  With X and Y placed in one or the other of r1c9 and r2c8, no place exists for
Z outside the Intersection, inferring Z is only True in the Intersection.  The confirmed existence
of Z in the intersection creates an Exposed pair XYr3c26 in Row 3 outside the Intersection, and a
Hidden Pair XY#2(r1c9,r2c8) in Box 3.  The same applies with X, Y, and Z interchanged.

Asserting the premise Xr3c2 and Xr3c6 infers the Truth: Zr3c789.  Therefore:
   *  X, Y, and Z cannot be True in any other cells in Row 3, resulting in their elimination.
   *  All values other than X, Y, and Z in r1c9 and r2c8 cannot be True, resulting in their
      elimination.

See :ref:`Human Solvable Patterns / Grouped Bent Triples - Exposed Line, Hidden Box <hsp_gbt_el_hb>`
for worked examples.

Hidden Line, Exposed Box Grouped Bent Triples
+++++++++++++++++++++++++++++++++++++++++++++

.. figure:: images/gbt-hl-eb-cd1.png
   :name: fig-gbt-hl-eb-cd1
   :scale: 100%
   :alt: Grouped Bent Triple: Hidden Line, Exposed Box Candidate Diagram
   :align: right
   :figwidth: 400px

   Grouped Bent Triple: Hidden Line, Exposed Box Candidate Diagram

   :raw-html:`<mong>UXYZr3c789,XYZ(r1c8,r2c7),XY--r3c25</mong>`

Asserting the premise that Xr2c7 and Yr1c8 are True, infers that X and Y cannot be True anywhere
else in Box 3 including the intersection with Row 3.  In Row 3, X and Y can only then be True in
either r3c2 and r3c5.  With X and Y placed in one or the other of r3c2 and r3c5, no place exists for
Z outside the Intersection, inferring Z is only True in the Intersection.  The confirmed existence
of Z in the Intersection creates an Exposed Pair XY(r1c8,r2c7) in Box 3 outside the Intersection and
a Hidden Pair XY#2r3c25 in Row 3.  The same applies with X, Y, and Z interchanged.

Asserting the premise Xr2c7 and Yr1c8 infers the Truth Zr3c789.  Therefore:
   *  X, Y, and Z cannot be True in any other cell in Box 3, resulting in their elimination.
   *  All values other than X, Y, and Z in r3c25 cannot be True, resulting in their elimination.

See :ref:`Human Solvable Patterns / Grouped Bent Triples - Hidden Line, Exposed Box <hsp_gbt_hl_eb>`
for worked examples.

Grouped Bent Quads
------------------

Exposed Line, Hidden Box Grouped Bent Quads
+++++++++++++++++++++++++++++++++++++++++++

.. figure:: images/gbq-el-hb-cd1.png
   :name: fig-gbq-el-hb-cd1
   :scale: 100%
   :alt: Grouped Bent Quad: Exposed Line, Hidden Box Candidate Diagram
   :align: right
   :figwidth: 400px

   Grouped Bent Quad: Exposed Line, Hidden Box Candidate Diagram

   :raw-html:`<mong>UWXYZr3c789,WXYZr3c246,WXYZ--(r1c79,r2c8)</mong>`

Asserting the premise that Wr3c2, Xr3c4 and Yr3c6 are True, infers that W, X, and Y cannot be True
anywhere else in Row 3 including the intersection with Box 3. In Box 3, W, X, and Y can only then be
True in one of r1c7, r1c9, and r2c8 each.  With W, X, and Y placed in any of r1c7, r1c9, and r2c8
each, no place exists for Z outside the Intersection, inferring Z is only True in the Intersection.
The confirmed existence of Z in the intersection creates an Exposed Triple  WXYr3c246 in Row 3
outside the Intersection, and a Hidden Triple XY#3(r1c79,r2c8) in Box 3.  The same applies with W,
X, Y, and Z interchanged.

Asserting the premise Wr3c2, Xr3c4 and Xr3c6 infers the Truth: Zr3c789.  Therefore:
   *  W, X, Y, and Z cannot be True in any other cells in Row 3, resulting in their elimination.
   *  All values other than W, X, Y, and Z in r1c79 and r2c8 cannot be True, resulting in their
      elimination.

See :ref:`Human Solvable Patterns / Grouped Bent Quads - Exposed Line, Hidden Box <hsp_gbq_el_hb>`
for worked examples.

Hidden Line, Exposed Box Grouped Bent Quads
+++++++++++++++++++++++++++++++++++++++++++

.. figure:: images/gbq-hl-eb-cd1.png
   :name: fig-gbq-hl-eb-cd1
   :scale: 100%
   :alt: Grouped Bent Quad: Hidden Line, Exposed Box Candidate Diagram
   :align: right
   :figwidth: 400px

   Grouped Bent Quad: Hidden Line, Exposed Box Candidate Diagram

   :raw-html:`<mong>UWXYZ(r1c8,r2c79),WXYZ--r3c235</mong>`

Asserting the premise that Wr2c7, Xr1c8 and Yr2c9 are True, infers that W, X, and Y cannot be True
anywhere else in Box 3 including the intersection with Row 3.  In Row 3, W, X, and Y can only then
be True in one of r3c2, r3c3, and r3c5 each.  With W, X, and Y placed in any of r3c235 each, no
place exists for Z outside the Intersection, inferring Z is only True in the Intersection.  The
confirmed existence of Z in the Intersection creates an Exposed Triple WXY(r1c8,r2c79) in Box 3
outside the Intersection and a Hidden triple Pair WXY#3r3c235 in Row 3.  The same applies with W, X,
Y, and Z interchanged.

Asserting the premise that Wr2c7, Xr1c8 and Yr2c9 are True, infers the Truth Zr3c789.  Therefore:
   *  W, X, Y, and Z cannot be True in any other cell in Box 3, resulting in their elimination.
   *  All values other than W, X, Y, and Z in r3c235 cannot be True, resulting in their elimination.

See :ref:`Human Solvable Patterns / Grouped Bent Quads - Hidden Line, Exposed Box <hsp_gbq_hl_eb>`
for worked examples.

Bent Hidden Subsets
===================

Also known as Fireworks, this description is derived from the following sources:
   |  http://forum.enjoysudoku.com/fireworks-t39513.html
   |  https://www.sudokuwiki.org/Fireworks

The only viable pattern from this family is the Bent Hidden Triple.  Bent Hidden Singles and Pairs
do not produce any eliminations, but maybe useful as building blocks for the more comprehensive
:ref:`Unlocked Sets <found_unlocked_sets>`.  See the above sources for that discussion, our concern
is the productive Bent Hidden Triple pattern.

.. figure:: images/bht-cd1.png
   :name: fig-bht-cd1
   :scale: 100%
   :alt: Bent Hidden Triple Candidate Diagram
   :align: right
   :figwidth: 400px

   Bent Hidden Triple Candidate Diagram

   :raw-html:`<mong>XYZr1c9-XYZr1c1-XYZr9c1</mong>`

Bent Hidden Triples are a three Candidate, three Cell patterns in an Intersecting Row and Column and
also involving the Box of the intersection.  :numref:`fig-bht-cd1` shows a XYZ(r1c1,r1c9,r9c1)
pattern.

X, Y, or Z can either be True in one cell outside the box bounding the Intersecting Row and Column
or once inside the Box.

*  If \*r1c1 is True, then it is impossible to place all of X, Y, Z in both Row 1 and Column 1.
   This means that one of X, Y, Z must be True in r1c1.
*  If Xr1c1 is True and \*r9c1 is True, then the Naked pair YZr23c1 is True, blocking Y and Z
   from being True in the box.  The only other place for Y and Z along Row 1 is r1c9 which has
   place for only one value, making it not possible to for \*r9c1 to be True.
*  If Xr1c1 is asserted then r9c1 can only assume the value Y or Z.  Which ever value it assumes,
   the other value will be True within the intersecting box along the Column, which means it
   cannot be True within the intersecting box along the Row, making it the True value outside
   the Box along the Row.

Therefore, any other candidates in those Three cells can be eliminated, as well as any occurrence of
X, Y, and Z along the Row or Column in the intersecting Box.

Bent Hidden Triples where two of the three candidates exist in the Pattern Cells outside the Box
housing the Intersections, so long as a Candidate is different. For example:
:raw-html:`<mong>XYr1c9-XYZr1c1-YZr9c1</mong>`

See :ref:`Human Solvable Patterns / Bent Hidden Triple <hsp_bht>` for worked examples.

